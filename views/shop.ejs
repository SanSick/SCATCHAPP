<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/stylesheets/style.css">
</head>

<body class="bg-white text-gray-900">
    <%- include('./partials/header') %>
        <% if(success.length> 0) { %>
            <div class="absolute top-12 left-1/2 -translate-x-1/2 -translate-y-1/2 p-3 rounded-md bg-blue-500">
                <span class="inline-block mt-1 mb-1 text-white ">
                    <%= success %>
                </span>
            </div>
            <% } %>

                <!-- Mobile + Tablet Sidebar -->
                <%- include('./partials/sidebarmb') %>
                    <div class="w-full flex font-sans px-6 py-8 gap-6">
                        <!-- Sidebar (from partial) -->
                        <%- include('./partials/sidebar') %>
                            <!-- Product Grid -->
                            <main class=" w-[100%] lg:w-[80%]">
                                <!-- Search Bar (optional, can remove if not needed) -->
                                <div class="mb-6 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4">
                                    <!-- Title -->
                                    <h2 class="text-3xl font-semibold text-gray-800">Products</h2>
                                    <!-- Search Form -->
                                    <form action="/shop" method="GET"
                                        class="flex flex-col sm:flex-row gap-2 w-full sm:w-auto">
                                        <input type="text" name="q" placeholder="Search products..."
                                            class="border-[1.5px] px-3 py-2 outline-none rounded-md w-full sm:w-64">
                                        <button
                                            class="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition w-full sm:w-auto">
                                            Search
                                        </button>
                                    </form>
                                </div>


                                <!-- Grid with 3 items per row -->
                                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
                                    <% products.forEach(function(product) { %>
                                        <div
                                            class="rounded-md shadow-md hover:shadow-xl transition flex flex-col overflow-hidden bg-white">
                                            <!-- Image Section -->
                                            <a href="/products/<%= product._id %>"
                                                class="w-full h-68 flex items-center justify-center bg-gray-100 overflow-hidden rounded-t-md">
                                                <img class="h-[95%] object-contain" src="<%= product.image %>"
                                                    alt="<%= product.name %>">
                                            </a>

                                            <!-- Info Section -->
                                            <div
                                                class="p-4 flex justify-between items-center bg-[#E5E5E5] rounded-b-md">
                                                <div>
                                                    <h3 class="text-base font-semibold text-gray-800 truncate w-40">
                                                        <%= product.name.length> 20 ? product.name.substring(0, 20) +
                                                            "..." : product.name %>
                                                    </h3>
                                                    <h4 class="text-indigo-600 font-bold">$ <%= product.price %>
                                                    </h4>
                                                </div>
                                                <a class="w-9 h-9 flex items-center justify-center rounded-full bg-indigo-600 text-white hover:bg-indigo-700 transition"
                                                    href="/addtocart/<%= product._id %>">
                                                    <i class="ri-add-line"></i>
                                                </a>
                                            </div>

                                        </div>
                                        <% }) %>
                                </div>
                            </main>
                    </div>
                    <%- include('./partials/footer') %>
</body>

</html>